description: |
  rav is a simple tool to help run commands. 
  install with pip install rav

scripts:
  install:
    - venv\Scripts\python.exe -m pip install -r requirements.txt
  install_dev:
    - venv\Scripts\python.exe -m pip install -r requirements.txt
    - venv\Scripts\python.exe -m pip install -r requirements.dev.txt
  makemigrations:
    - venv\Scripts\python.exe src/manage.py makemigrations
  migrate:
    - venv\Scripts\python.exe src/manage.py migrate
  dev:
    - venv\Scripts\python.exe src/manage.py runserver 8080
  test:
    - cd src && ..\venv\Scripts\python.exe manage.py test
  vendors_pull:
    # grab vendor files to serve via whitenoise
    - venv\Scripts\rav.exe download staticfiles_dev
  collectstatic:
    - cd src && ..\venv\Scripts\python.exe manage.py collectstatic --noinput
  docker_build:
    - docker build -t cfe-saas-foundations:latest .
  docker_stop:
    - docker stop cfe-saas-foundations
  docker_run:
    - docker run --rm --name cfe-saas-foundations --env-file .env -e PORT=8080 -p 8080:8080 cfe-saas-foundations:latest
  docker_shell:
    - docker run --rm -it --env-file .env cfe-saas-foundations:latest /bin/bash

downloads:
  staticfiles_prod:
    name: vendor
    destination: staticfiles/vendors
    verbose: true
    raise_on_error: true
    overwrite: true
    files:
      - name: saas-theme.min.css
        overwrite: false
        url: https://raw.githubusercontent.com/codingforentrepreneurs/SaaS-Foundations/main/src/staticfiles/theme/saas-theme.min.css
      - name: flowbite.min.css
        overwrite: false
        url: https://cdnjs.cloudflare.com/ajax/libs/flowbite/2.5.2/flowbite.min.css 
      - name: flowbite.min.js
        overwrite: false
        url: https://cdnjs.cloudflare.com/ajax/libs/flowbite/2.5.2/flowbite.min.js
      - name: flowbite.min.js.map
        overwrite: false
        url: https://cdnjs.cloudflare.com/ajax/libs/flowbite/2.5.2/flowbite.min.js.map
  staticfiles_dev:
    name: vendor
    destination: src/staticfiles/vendors
    verbose: true
    raise_on_error: true
    overwrite: true
    files:
      - name: saas-theme.min.css
        overwrite: false
        url: https://raw.githubusercontent.com/codingforentrepreneurs/SaaS-Foundations/main/src/staticfiles/theme/saas-theme.min.css
      - name: flowbite.min.css
        overwrite: false
        url: https://cdnjs.cloudflare.com/ajax/libs/flowbite/2.5.2/flowbite.min.css 
      - name: flowbite.min.js
        overwrite: false
        url: https://cdnjs.cloudflare.com/ajax/libs/flowbite/2.5.2/flowbite.min.js
      - name: flowbite.min.js.map
        overwrite: false
        url: https://cdnjs.cloudflare.com/ajax/libs/flowbite/2.5.2/flowbite.min.js.map